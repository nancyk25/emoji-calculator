const { Component } = React;
const { connect, Provider } = ReactRedux;
const { createStore, combineReducers } = Redux;

const emojiIDs = [
'\ud83d\ude03','\ud83d\ude04','\ud83d\ude01','\ud83d\ude06','\ud83d\ude05','\ud83d\ude02','\ud83e\udd23','\u263a\ufe0f','\ud83d\ude0a','\ud83d\ude07','\ud83d\ude42','\ud83d\ude43','\ud83d\ude09','\ud83d\ude0c','\ud83d\ude0d','\ud83d\ude18','\ud83d\ude17','\ud83d\ude19','\ud83d\ude1a','\ud83d\ude0b','\ud83d\ude1c','\ud83d\ude1d','\ud83d\ude1b','\ud83e\udd11','\ud83e\udd17','\ud83e\udd13','\ud83d\ude0e','\ud83e\udd21','\ud83e\udd20','\ud83d\ude0f','\ud83d\ude12','\ud83d\ude1e','\ud83d\ude14','\ud83d\ude1f','\ud83d\ude15','\ud83d\ude41','\u2639\ufe0f','\ud83d\ude23','\ud83d\ude16','\ud83d\ude2b','\ud83d\ude29','\ud83d\ude24','\ud83d\ude20','\ud83d\ude21','\ud83d\ude36','\ud83d\ude10','\ud83d\ude11','\ud83d\ude2f','\ud83d\ude26','\ud83d\ude27','\ud83d\ude2e','\ud83d\ude32','\ud83d\ude35','\ud83d\ude33','\ud83d\ude31','\ud83d\ude28','\ud83d\ude30','\ud83d\ude22','\ud83d\ude25','\ud83e\udd24','\ud83d\ude2d','\ud83d\ude13','\ud83d\ude2a','\ud83d\ude34','\ud83d\ude44','\ud83e\udd14','\ud83e\udd25','\ud83d\ude2c','\ud83e\udd10','\ud83e\udd22','\ud83e\udd27','\ud83d\ude37','\ud83e\udd12','\ud83e\udd15','\ud83d\ude08','\ud83d\udc7f','\ud83d\udc79','\ud83d\udc7a','\ud83d\udca9','\ud83d\udc7b','\ud83d\udc80','\u2620\ufe0f','\ud83d\udc7d','\ud83d\udc7e','\ud83e\udd16','\ud83c\udf83','\ud83d\ude3a','\ud83d\ude38','\ud83d\ude39','\ud83d\ude3b','\ud83d\ude3c','\ud83d\ude3d','\ud83d\ude40','\ud83d\ude3f','\ud83d\ude3e','\ud83d\udc50','\ud83d\ude4c','\ud83d\udc4f','\ud83d\ude4f','\ud83e\udd1d','\ud83d\udc4d','\ud83d\udc4e','\ud83d\udc4a','\u270a','\ud83e\udd1b','\ud83e\udd1c','\ud83e\udd1e','\u270c\ufe0f','\ud83e\udd18','\ud83d\udc4c','\ud83d\udc48','\ud83d\udc49','\ud83d\udc46','\ud83d\udc47','\u261d\ufe0f','\u270b','\ud83e\udd1a','\ud83d\udd90','\ud83d\udd96','\ud83d\udc4b','\ud83e\udd19','\ud83d\udcaa','\ud83d\udd95','\u270d\ufe0f','\ud83e\udd33','\ud83d\udc85','\ud83d\udc8d','\ud83d\udc84','\ud83d\udc8b','\ud83d\udc44','\ud83d\udc45','\ud83d\udc42','\ud83d\udc43','\ud83d\udc63','\ud83d\udc41','\ud83d\udc40','\ud83d\udde3','\ud83d\udc64','\ud83d\udc65','\ud83d\udc76','\ud83d\udc66','\ud83d\udc67','\ud83d\udc68','\ud83d\udc69','\ud83d\udc71\u200d\u2640','\ud83d\udc71','\ud83d\udc74','\ud83d\udc75','\ud83d\udc72','\ud83d\udc73\u200d\u2640','\ud83d\udc73','\ud83d\udc6e\u200d\u2640','\ud83d\udc6e','\ud83d\udc77\u200d\u2640','\ud83d\udc77','\ud83d\udc82\u200d\u2640','\ud83d\udc82','\ud83d\udd75\ufe0f\u200d\u2640\ufe0f','\ud83d\udd75','\ud83d\udc69\u200d\u2695','\ud83d\udc68\u200d\u2695','\ud83d\udc69\u200d\ud83c\udf3e','\ud83d\udc68\u200d\ud83c\udf3e','\ud83d\udc69\u200d\ud83c\udf73','\ud83d\udc68\u200d\ud83c\udf73','\ud83d\udc69\u200d\ud83c\udf93','\ud83d\udc68\u200d\ud83c\udf93','\ud83d\udc69\u200d\ud83c\udfa4','\ud83d\udc68\u200d\ud83c\udfa4','\ud83d\udc69\u200d\ud83c\udfeb','\ud83d\udc68\u200d\ud83c\udfeb','\ud83d\udc69\u200d\ud83c\udfed','\ud83d\udc68\u200d\ud83c\udfed','\ud83d\udc69\u200d\ud83d\udcbb','\ud83d\udc68\u200d\ud83d\udcbb','\ud83d\udc69\u200d\ud83d\udcbc','\ud83d\udc68\u200d\ud83d\udcbc','\ud83d\udc69\u200d\ud83d\udd27','\ud83d\udc68\u200d\ud83d\udd27','\ud83d\udc69\u200d\ud83d\udd2c','\ud83d\udc68\u200d\ud83d\udd2c','\ud83d\udc69\u200d\ud83c\udfa8','\ud83d\udc68\u200d\ud83c\udfa8','\ud83d\udc69\u200d\ud83d\ude92','\ud83d\udc68\u200d\ud83d\ude92','\ud83d\udc69\u200d\u2708','\ud83d\udc68\u200d\u2708','\ud83d\udc69\u200d\ud83d\ude80','\ud83d\udc68\u200d\ud83d\ude80','\ud83d\udc69\u200d\u2696','\ud83d\udc68\u200d\u2696','\ud83e\udd36','\ud83c\udf85','\ud83d\udc78','\ud83e\udd34','\ud83d\udc70','\ud83e\udd35','\ud83d\udc7c','\ud83e\udd30','\ud83d\ude47\u200d\u2640','\ud83d\ude47','\ud83d\udc81','\ud83d\udc81\u200d\u2642','\ud83d\ude45','\ud83d\ude45\u200d\u2642','\ud83d\ude46','\ud83d\ude46\u200d\u2642','\ud83d\ude4b','\ud83d\ude4b\u200d\u2642','\ud83e\udd26\u200d\u2640','\ud83e\udd26\u200d\u2642','\ud83e\udd37\u200d\u2640','\ud83e\udd37\u200d\u2642','\ud83d\ude4e','\ud83d\ude4e\u200d\u2642','\ud83d\ude4d','\ud83d\ude4d\u200d\u2642','\ud83d\udc87','\ud83d\udc87\u200d\u2642','\ud83d\udc86','\ud83d\udc86\u200d\u2642','\ud83d\udd74','\ud83d\udc83','\ud83d\udd7a','\ud83d\udc6f','\ud83d\udc6f\u200d\u2642','\ud83d\udeb6\u200d\u2640','\ud83d\udeb6','\ud83c\udfc3\u200d\u2640','\ud83c\udfc3','\ud83d\udc6b','\ud83d\udc6d','\ud83d\udc6c','\ud83d\udc91','\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc69','\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68','\ud83d\udc8f','\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69','\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68','\ud83d\udc6a','\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67','\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66','\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66','\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc67','\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66','\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67','\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66','\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66','\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc67','\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66','\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67','\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66','\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66','\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc67','\ud83d\udc69\u200d\ud83d\udc66','\ud83d\udc69\u200d\ud83d\udc67','\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66','\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66','\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc67','\ud83d\udc68\u200d\ud83d\udc66','\ud83d\udc68\u200d\ud83d\udc67','\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66','\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66','\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc67','\ud83d\udc5a','\ud83d\udc55','\ud83d\udc56','\ud83d\udc54','\ud83d\udc57','\ud83d\udc59','\ud83d\udc58','\ud83d\udc60','\ud83d\udc61','\ud83d\udc62','\ud83d\udc5e','\ud83d\udc5f','\ud83d\udc52','\ud83c\udfa9','\ud83c\udf93','\ud83d\udc51','\u26d1','\ud83c\udf92','\ud83d\udc5d','\ud83d\udc5b','\ud83d\udc5c','\ud83d\udcbc','\ud83d\udc53','\ud83d\udd76','\ud83c\udf02','\u2602\ufe0f','\ud83d\udc36','\ud83d\udc31','\ud83d\udc2d','\ud83d\udc39','\ud83d\udc30','\ud83e\udd8a','\ud83d\udc3b','\ud83d\udc3c','\ud83d\udc28','\ud83d\udc2f','\ud83e\udd81','\ud83d\udc2e','\ud83d\udc37','\ud83d\udc3d','\ud83d\udc38','\ud83d\udc35','\ud83d\ude48','\ud83d\ude49','\ud83d\ude4a','\ud83d\udc12','\ud83d\udc14','\ud83d\udc27','\ud83d\udc26','\ud83d\udc24','\ud83d\udc23','\ud83d\udc25','\ud83e\udd86','\ud83e\udd85','\ud83e\udd89','\ud83e\udd87','\ud83d\udc3a','\ud83d\udc17','\ud83d\udc34','\ud83e\udd84','\ud83d\udc1d','\ud83d\udc1b','\ud83e\udd8b','\ud83d\udc0c','\ud83d\udc1a','\ud83d\udc1e','\ud83d\udc1c','\ud83d\udd77','\ud83d\udd78','\ud83d\udc22','\ud83d\udc0d','\ud83e\udd8e','\ud83e\udd82','\ud83e\udd80','\ud83e\udd91','\ud83d\udc19','\ud83e\udd90','\ud83d\udc20','\ud83d\udc1f','\ud83d\udc21','\ud83d\udc2c','\ud83e\udd88','\ud83d\udc33','\ud83d\udc0b','\ud83d\udc0a','\ud83d\udc06','\ud83d\udc05','\ud83d\udc03','\ud83d\udc02','\ud83d\udc04','\ud83e\udd8c','\ud83d\udc2a','\ud83d\udc2b','\ud83d\udc18','\ud83e\udd8f','\ud83e\udd8d','\ud83d\udc0e','\ud83d\udc16','\ud83d\udc10','\ud83d\udc0f','\ud83d\udc11','\ud83d\udc15','\ud83d\udc29','\ud83d\udc08','\ud83d\udc13','\ud83e\udd83','\ud83d\udd4a','\ud83d\udc07','\ud83d\udc01','\ud83d\udc00','\ud83d\udc3f','\ud83d\udc3e','\ud83d\udc09','\ud83d\udc32','\ud83c\udf35','\ud83c\udf84','\ud83c\udf32','\ud83c\udf33','\ud83c\udf34','\ud83c\udf31','\ud83c\udf3f','\u2618\ufe0f','\ud83c\udf40','\ud83c\udf8d','\ud83c\udf8b','\ud83c\udf43','\ud83c\udf42','\ud83c\udf41','\ud83c\udf44','\ud83c\udf3e','\ud83d\udc90','\ud83c\udf37','\ud83c\udf39','\ud83e\udd40','\ud83c\udf3b','\ud83c\udf3c','\ud83c\udf38','\ud83c\udf3a','\ud83c\udf0e','\ud83c\udf0d','\ud83c\udf0f','\ud83c\udf15','\ud83c\udf16','\ud83c\udf17','\ud83c\udf18','\ud83c\udf11','\ud83c\udf12','\ud83c\udf13','\ud83c\udf14','\ud83c\udf1a','\ud83c\udf1d','\ud83c\udf1e','\ud83c\udf1b','\ud83c\udf1c','\ud83c\udf19','\ud83d\udcab','\u2b50\ufe0f','\ud83c\udf1f','\u2728','\u26a1\ufe0f','\ud83d\udd25','\ud83d\udca5','\u2604','\u2600\ufe0f','\ud83c\udf24','\u26c5\ufe0f','\ud83c\udf25','\ud83c\udf26','\ud83c\udf08','\u2601\ufe0f','\ud83c\udf27','\u26c8','\ud83c\udf29','\ud83c\udf28','\u2603\ufe0f','\u26c4\ufe0f','\u2744\ufe0f','\ud83c\udf2c','\ud83d\udca8','\ud83c\udf2a','\ud83c\udf2b','\ud83c\udf0a','\ud83d\udca7','\ud83d\udca6','\u2614\ufe0f','\ud83c\udf4f','\ud83c\udf4e','\ud83c\udf50','\ud83c\udf4a','\ud83c\udf4b','\ud83c\udf4c','\ud83c\udf49','\ud83c\udf47','\ud83c\udf53','\ud83c\udf48','\ud83c\udf52','\ud83c\udf51','\ud83c\udf4d','\ud83e\udd5d','\ud83e\udd51','\ud83c\udf45','\ud83c\udf46','\ud83e\udd52','\ud83e\udd55','\ud83c\udf3d','\ud83c\udf36','\ud83e\udd54','\ud83c\udf60','\ud83c\udf30','\ud83e\udd5c','\ud83c\udf6f','\ud83e\udd50','\ud83c\udf5e','\ud83e\udd56','\ud83e\uddc0','\ud83e\udd5a','\ud83c\udf73','\ud83e\udd53','\ud83e\udd5e','\ud83c\udf64','\ud83c\udf57','\ud83c\udf56','\ud83c\udf55','\ud83c\udf2d','\ud83c\udf54','\ud83c\udf5f','\ud83e\udd59','\ud83c\udf2e','\ud83c\udf2f','\ud83e\udd57','\ud83e\udd58','\ud83c\udf5d','\ud83c\udf5c','\ud83c\udf72','\ud83c\udf65','\ud83c\udf63','\ud83c\udf71','\ud83c\udf5b','\ud83c\udf5a','\ud83c\udf59','\ud83c\udf58','\ud83c\udf62','\ud83c\udf61','\ud83c\udf67','\ud83c\udf68','\ud83c\udf66','\ud83c\udf70','\ud83c\udf82','\ud83c\udf6e','\ud83c\udf6d','\ud83c\udf6c','\ud83c\udf6b','\ud83c\udf7f','\ud83c\udf69','\ud83c\udf6a','\ud83e\udd5b','\ud83c\udf7c','\u2615\ufe0f','\ud83c\udf75','\ud83c\udf76','\ud83c\udf7a','\ud83c\udf7b','\ud83e\udd42','\ud83c\udf77','\ud83e\udd43','\ud83c\udf78','\ud83c\udf79','\ud83c\udf7e','\ud83e\udd44','\ud83c\udf74','\ud83c\udf7d','\u26bd\ufe0f','\ud83c\udfc0','\ud83c\udfc8','\u26be\ufe0f','\ud83c\udfbe']


const calcState = {
  value: "",
  btns: ["C", "1", "2", "3", "+","4", "5", "6","-","7", "8", "9", "*", ".","0", "/","="],
      
  emojis: ["C", "🏀", "🐱", "🌴", "+", "🚘", "🍎", "🍔","-","🔥", "🌼", "🚀", "*",".", "🌈","/","=",]
}

const calcReducer = (state = calcState, action) => {
  switch(action.type){
    case 'ADD_ELEM':
      return {...state, value: state.value == 0 ? action.text : state.value + action.text}
    case 'CLEAR':
      return { ...state, value: 0}
    case 'EQUAL':
      return { ...state, value: eval(action.value)}
    case 'RANDOMIZE':
      return {...state, value: action.value }
    case 'TURN_OFF':
      return {...state, value: ""}
    default:
      return state;
  }
}



class App extends Component{
  constructor(props){
    super(props)
    this.state = {
      emojiMode: false,
      isOn: false
    }
  }
  
 toggleEmoji = () => {
  this.setState({
    emojiMode: !this.state.emojiMode
  })
   this.props.clear()
}
 
 toggleOn = () => {
   
   this.state.isOn ?
   this.props.turnOff()
   : this.props.clear()

   this.setState({ isOn: !this.state.isOn })
   
   console.log(this.state.isOn)
 }
 
randomizeEmoji = (min,max) => {
  console.log(min,max)
  let math = Math.floor(Math.random() * (max - min + 1)) + min; 
  console.log(math)
  let generatedEmoji = `${emojiIDs[math]}`
  console.log(generatedEmoji)
   //dispatch emoji as a callback to the reducer?
  this.props.randomize(generatedEmoji);
}
  
  render(){
    const { value, btns, emojis, addElem, clear, equal, randomize } = this.props;
    const { emojiMode } = this.state;
    return(
      <div className="App">
        <div className="panel"></div>
           <div className="input-container">
             <input type="text" value={value} />
            </div>
        <div className="buttons-container">
           <button onClick={()=>this.toggleOn()} id="on-button"> ON/OFF</button>

          <button onClick={()=>this.toggleEmoji()} id="emoji-button"> EMOJIFY</button>
          { !emojiMode && btns.map((item,key) => {
            
            if(item == "C"){
              return (<button onClick={ clear.bind(this) } key={key}>{item}</button>)
            } else if (item == "="){
              return (<button onClick={ equal.bind(this,value) } key={key}>{item}</button>)
            } else{      
            return(<button onClick={ addElem.bind(this,item) } key={key}>{item}</button>)
            }           
          })}
          
          { emojiMode && emojis.map((emoji,key)=>{
            if (emoji == "C"){
              return (<button onClick={clear.bind(this)} key={key}>{emoji}</button>)
            } else if ( emoji == "="){
              return(<button onClick={()=>this.randomizeEmoji(0,emojiIDs.length)}>{emoji}</button>)
            } else {
            return(<button onClick={ addElem.bind(this, emoji)} key={key}>{emoji}</button>)
            }
          })}
        </div>
        </div>
    );
  }
  
}

const mapStateToProps = (state) => {
  return{
    value: state.value,
    btns: state.btns,
    emojis: state.emojis
  }
}

const mapDispatchToProps = (dispatch) => {
  return{
    addElem: (text) => {
      dispatch({
        type: 'ADD_ELEM',
        text
      })
    },
    clear: () => {
      dispatch({
        type: 'CLEAR'
      })
    },
    equal: (value) => {
      dispatch({
        type: 'EQUAL',
        value
      })
    },
    randomize: (generatedEmoji) => {
      dispatch({
        type: 'RANDOMIZE',
        value: generatedEmoji
      })
    },
    turnOff: () => {
      dispatch({
        type: 'TURN_OFF'
      })
    }
  }
}

const Calc = connect(mapStateToProps, mapDispatchToProps)(App);

const store = createStore(calcReducer);



ReactDOM.render(
  <Provider store={store}>
    <Calc />
  </Provider>
, document.getElementById('root'));